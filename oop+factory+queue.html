<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>מעלית עם תור</title>
<link rel="stylesheet" href="help.css">
<script src="scripts.js"></script>
    <style>
        /* body {
            direction: ltr;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .add-building-form {
            display: inline-block;
            margin-top: 5px;
            background-color: rgb(171, 251, 251);
            border: #666 1px solid;
            padding: 10px;
        }

        .buildings-area {
            display: flex;
            flex-direction: row;
            justify-content: left;
            align-items: flex-end;
        }
        
        .building-container-column {
            display: flex;
            flex-direction: column;
            border: turquoise 1px solid;
            padding: 5px; 
        }

        .building-container {
            display: flex;
            flex-direction: row;
            justify-content: left;
            align-items: flex-end;
        }

        .building {
            display: flex;
            flex-direction: column-reverse;
            align-items: flex-start;
        }

        .floor-row {
            display: flex;
            align-items: center;
            height: 110px;
        }

        .floor {
            width: 250px;
            height: 110px;
            display: flex;
            align-items: center;
            background-color: silver;
            background-image: linear-gradient(335deg, #b00 23px, transparent 23px),
                linear-gradient(155deg, #d00 23px, transparent 23px),
                linear-gradient(335deg, #b00 23px, transparent 23px),
                linear-gradient(155deg, #d00 23px, transparent 23px);
            background-size: 58px 58px;
            background-position: 0px 2px, 4px 35px, 29px 31px, 34px 6px;
            padding-right: 10px;
            border-top: 7px black solid;
        }

        .floor-button {
            width: 40px;
            height: 30px;
            font-size: 14px;
            line-height: 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .floor-button.clicked {
            background-color: green;
            color: white;
        }

        .elevator-shaft {
            position: relative;
            width: 60px;
            height: 100%;
            margin-right: 10px;
            border-left: 2px solid #aaa;
            display: flex;
        }

        .elevator-cabin {
            position: absolute;
            width: 100%;
            height: 40px;
            background-color: #666;
            box-shadow: inset 0 0 4px #000;
            color: white;
            text-align: center;
            line-height: 40px;
            font-weight: bold;
            bottom: 0px;
        } */
        </style>
</head>

<body>
    <template class="building-template" id="building-template">
        <div class='building-container-column'>
            <div class='building-container'>
                <div class='building' id='building'></div>
                <div class='elevator-shaft'></div>
            </div>
            <button class='remove-building-button'>Remove</button>
        </div>
    </template>


    <template class="floor-template" id="floor-template">
        <div class='floor-row'>
            <div class='floor'>
                <span class='timer'></span>
                <button class='metal linear'></button>
            </div>
        </div>
    </template>


    
    <div class="buildings-area"></div>
    <div class="add-building-form">
        <input type="number" id="floors" placeholder="Number of Floor" min="1" required>
        <input type="number" id="elevators" placeholder="Number of Elevators" min="1" required>
        <button id="add-building-button">Add Building</button>
    </div>

    <script>

        let buildingUniqueID = 0;
        function addBuilding(floorsNum, elevatorsNum) {
            buildingUniqueID++;
            const elevators = Array.from({ length: elevatorsNum }, () => ElevatorFactory.createElevator());
            const elevatorController =  Factory.createElevatorController(elevators);
            const building = new Building(floorsNum, elevatorController);

            const buildingArea = document.querySelector('.buildings-area');
            let buildingColumn = document.querySelector('#building-template').content.cloneNode(true);
            buildingColumn.querySelector('.building-container-column').id = `building-column${buildingUniqueID}`;

            buildingArea.appendChild(buildingColumn);
            buildingColumn = buildingArea.querySelector(`#building-column${buildingUniqueID}`);
            buildingColumn.querySelector('.building-container').appendChild(building.getElement());
            elevators.forEach(elev => {
                buildingColumn.querySelector('.building-container').appendChild(elev.getElement());
            });
            
            const removeButton = buildingColumn.querySelector('.remove-building-button');
    
            removeButton.onclick = () => {
                buildingColumn.remove();
            };
        }
        addBuilding(16, 3);


        const add_building_form = document.querySelector('.add-building-form');
        const addBuildingButton = add_building_form.querySelector('#add-building-button');
        const floorsInput = add_building_form.querySelector('#floors');
        const elevatorsInput = add_building_form.querySelector('#elevators');
        addBuildingButton.onclick = () => {
            const floors = parseInt(floorsInput.value, 10);
            const elevators = parseInt(elevatorsInput.value, 10);
            if (floors > 0 && elevators > 0) {
                addBuilding(floors, elevators);
                floorsInput.value = '';
                elevatorsInput.value = '';
            } else {
                alert('Please enter valid numbers for floors and elevators.');
            }
        };

    </script>
</body>

</html>